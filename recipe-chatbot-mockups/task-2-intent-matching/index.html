<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task 2: Evaluate Response Quality - Recipe Chatbot</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            max-width: 1000px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
            color: #333;
        }
        .navigation {
            background: #f6f8fa;
            padding: 15px;
            border-radius: 6px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .nav-link {
            color: #0969da;
            text-decoration: none;
            font-weight: 500;
        }
        .nav-link:hover {
            text-decoration: underline;
        }
        .header {
            border-bottom: 1px solid #e0e0e0;
            margin-bottom: 30px;
            padding-bottom: 20px;
        }
        .intent-section {
            background: #fff;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            margin: 30px 0;
            overflow: hidden;
        }
        .intent-header {
            background: #f6f8fa;
            padding: 20px;
            border-bottom: 1px solid #d0d7de;
        }
        .intent-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 8px;
        }
        .user-query {
            background: #dbeafe;
            padding: 15px;
            border-radius: 6px;
            margin: 15px 0;
            font-style: italic;
        }
        .responses-container {
            padding: 20px;
        }
        .response-option {
            border: 2px solid #e5e7eb;
            border-radius: 6px;
            padding: 20px;
            margin: 15px 0;
            cursor: pointer;
            transition: all 0.2s;
            background: white;
        }
        .response-option:hover {
            border-color: #0969da;
            background: #f0f9ff;
        }
        .response-option.selected {
            border-color: #0969da;
            background: #dbeafe;
            box-shadow: 0 0 0 3px rgba(9, 105, 218, 0.1);
        }
        .response-label {
            font-weight: 600;
            color: #374151;
            margin-bottom: 10px;
        }
        .response-text {
            color: #4b5563;
            line-height: 1.5;
        }
        .submit-section {
            background: #fff;
            border: 1px solid #0969da;
            border-radius: 6px;
            padding: 20px;
            margin: 30px 0;
            text-align: center;
        }
        .submit-btn {
            background: #0969da;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 500;
        }
        .submit-btn:disabled {
            background: #6b7280;
            cursor: not-allowed;
        }
        .feedback {
            background: #d1edff;
            border: 1px solid #0969da;
            border-radius: 6px;
            padding: 20px;
            margin: 20px 0;
            display: none;
        }
        .feedback.show {
            display: block;
        }
        .feedback-item {
            background: white;
            border: 1px solid #d0d7de;
            border-radius: 6px;
            padding: 15px;
            margin: 10px 0;
        }
        .feedback-item.correct {
            background: #d1fae5;
            border-left: 4px solid #16a34a;
        }
        .feedback-item.incorrect {
            background: #fee2e2;
            border-left: 4px solid #dc2626;
        }
        .score-section {
            background: #e6f3ff;
            border: 1px solid #0969da;
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
            text-align: center;
            font-size: 18px;
            font-weight: 600;
        }
        .correct-badge {
            background: #16a34a;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 10px;
        }
        .incorrect-badge {
            background: #dc2626;
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 10px;
        }
        .overall-feedback {
            border-radius: 6px;
            padding: 15px;
            margin: 15px 0;
        }
        .overall-feedback.success {
            background: #d1fae5;
            border: 1px solid #16a34a;
        }
        .overall-feedback.good {
            background: #fef3c7;
            border: 1px solid #d97706;
        }
        .overall-feedback.needs-work {
            background: #fee2e2;
            border: 1px solid #dc2626;
        }
        .next-task {
            background: #0969da;
            color: white;
            padding: 12px 24px;
            border-radius: 6px;
            text-decoration: none;
            display: inline-block;
            margin-top: 20px;
            font-weight: 500;
        }
        .reset-section {
            text-align: center;
            margin: 30px 0;
            padding: 20px;
            border-top: 1px solid #e0e0e0;
        }
        .reset-btn {
            background: #6b7280;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            font-weight: 500;
            transition: background-color 0.2s;
        }
        .reset-btn:hover {
            background: #4b5563;
        }
    </style>
</head>
<body>
    <div class="navigation">
        <a href="../task-1-user-needs/index.html" class="nav-link">← Task 1: User Needs</a>
        <span>Task 2 of 5</span>
        <a href="../task-3-metrics-selection/index.html" class="nav-link">Next: Task 3 →</a>
    </div>

    <div class="header">
        <h1>Task 2: Evaluate Response Quality</h1>
        <p>For each customer query below, compare two AI responses and select the one that better satisfies the customer's need.</p>
    </div>

    <!-- Customer Query 1: Recipe Search -->
    <div class="intent-section">
        <div class="intent-header">
            <div class="intent-title">Customer Query 1: Recipe Search & Discovery</div>
            <div class="user-query">
                <strong>Customer Query:</strong> "I have chicken, bell peppers, and rice at home. Can you suggest a quick dinner recipe for 4 people?"
            </div>
        </div>
        <div class="responses-container">
            <div class="response-option" data-intent="recipe" data-option="a" onclick="selectResponse('recipe', 'a')">
                <div class="response-label">Response A:</div>
                <div class="response-text">Here are some chicken recipes you might like: Chicken Parmesan, Chicken Alfredo, and Grilled Chicken. These are popular dishes that use chicken as the main ingredient. You can find the full recipes in our recipe section along with preparation instructions.</div>
            </div>
            <div class="response-option" data-intent="recipe" data-option="b" onclick="selectResponse('recipe', 'b')">
                <div class="response-label">Response B:</div>
                <div class="response-text">Perfect! I found a great match: <strong>Chicken and Bell Pepper Stir-Fry with Rice</strong> (Ready in 25 minutes, serves 4). You'll sauté diced chicken with bell peppers, serve over rice, and season with soy sauce and garlic. Would you like the full recipe with step-by-step instructions?</div>
            </div>
        </div>
    </div>

    <!-- Customer Query 2: Meal Planning -->
    <div class="intent-section">
        <div class="intent-header">
            <div class="intent-title">Customer Query 2: Meal Planning</div>
            <div class="user-query">
                <strong>Customer Query:</strong> "I need to plan healthy meals for my family this week. We have two teenagers and want to avoid processed foods."
            </div>
        </div>
        <div class="responses-container">
            <div class="response-option" data-intent="planning" data-option="a" onclick="selectResponse('planning', 'a')">
                <div class="response-label">Response A:</div>
                <div class="response-text">I'd be happy to help you plan healthy meals! For a family with teenagers, I recommend focusing on whole foods, lean proteins, and plenty of vegetables. Here's a 7-day meal plan: <strong>Monday</strong>: Grilled salmon with roasted vegetables, <strong>Tuesday</strong>: Turkey and veggie wraps, <strong>Wednesday</strong>: Homemade chicken soup. Would you like me to create a shopping list for these meals?</div>
            </div>
            <div class="response-option" data-intent="planning" data-option="b" onclick="selectResponse('planning', 'b')">
                <div class="response-label">Response B:</div>
                <div class="response-text">For healthy family meal planning, I suggest checking out our healthy eating section for meal ideas. We have lots of recipes that avoid processed ingredients, including options for teenagers. You can browse by dietary preferences and find weekly meal planning guides that focus on whole foods.</div>
            </div>
        </div>
    </div>

    <!-- Customer Query 3: Cooking Tips -->
    <div class="intent-section">
        <div class="intent-header">
            <div class="intent-title">Customer Query 3: Cooking Tips & Techniques</div>
            <div class="user-query">
                <strong>Customer Query:</strong> "Every time I cook salmon, it comes out dry. What am I doing wrong?"
            </div>
        </div>
        <div class="responses-container">
            <div class="response-option" data-intent="cooking" data-option="a" onclick="selectResponse('cooking', 'a')">
                <div class="response-label">Response A:</div>
                <div class="response-text">Salmon can be tricky to cook properly, but with the right technique you can get great results. Try our salmon recipes from the seafood section - we have several cooking methods including baking, grilling, and pan-searing that can help you achieve perfectly cooked fish every time.</div>
            </div>
            <div class="response-option" data-intent="cooking" data-option="b" onclick="selectResponse('cooking', 'b')">
                <div class="response-label">Response B:</div>
                <div class="response-text">Dry salmon is usually from overcooking! Here are key tips: <strong>1)</strong> Cook to 145°F internal temperature, <strong>2)</strong> Don't flip more than once, <strong>3)</strong> Try the "10-minute rule" - cook 10 minutes per inch of thickness, <strong>4)</strong> Consider baking in foil with lemon and herbs to retain moisture. Would you like some specific salmon recipes?</div>
            </div>
        </div>
    </div>

    <div class="submit-section">
        <h3>Submit Your Selections</h3>
        <p>Selected: <span id="selectionCount">0</span> of 3 responses</p>
        <button class="submit-btn" id="submitBtn" onclick="submitResponses()" disabled>Submit Response Choices</button>
    </div>

    <div class="feedback" id="feedback">
        <h3>Feedback</h3>
        
        <div class="feedback-item">
            <span class="correct-badge">CORRECT</span>
            <strong>Recipe Search:</strong> Response B is better because it directly uses the customer's available ingredients and provides a specific, actionable recipe suggestion with timing and serving information.
        </div>

        <div class="feedback-item">
            <span class="correct-badge">CORRECT</span>
            <strong>Meal Planning:</strong> Response A is superior as it provides a comprehensive, structured meal plan tailored to the family size and dietary preferences, plus offers a shopping list.
        </div>

        <div class="feedback-item">
            <span class="correct-badge">CORRECT</span>
            <strong>Cooking Tips:</strong> Response B delivers specific, actionable cooking techniques that directly address the customer's problem with detailed steps and additional recipe suggestions.
        </div>

        <p><strong>Key Pattern:</strong> The best responses are specific, actionable, and directly address the customer's exact situation rather than providing generic suggestions.</p>
        
        <a href="../task-3-metrics-selection/index.html" class="next-task">Continue to Task 3: Select Evaluation Metrics</a>
    </div>

    <div class="reset-section">
        <button class="reset-btn" onclick="location.reload()">Reset Exercise</button>
    </div>

    <script>
        let selections = {};

        function selectResponse(intent, option) {
            // Clear previous selection for this intent
            document.querySelectorAll(`[data-intent="${intent}"]`).forEach(el => {
                el.classList.remove('selected');
            });
            
            // Select the clicked option
            document.querySelector(`[data-intent="${intent}"][data-option="${option}"]`).classList.add('selected');
            
            // Store the selection
            selections[intent] = option;
            
            updateSelectionCount();
        }

        function updateSelectionCount() {
            const count = Object.keys(selections).length;
            document.getElementById('selectionCount').textContent = count;
            document.getElementById('submitBtn').disabled = count !== 3;
        }

        function submitResponses() {
            if (Object.keys(selections).length !== 3) {
                alert('Please select a response for all 3 intents.');
                return;
            }
            
            generatePersonalizedFeedback();
            document.getElementById('feedback').classList.add('show');
            document.querySelector('.submit-section').style.display = 'none';
        }

        function generatePersonalizedFeedback() {
            const correctAnswers = { recipe: 'b', planning: 'a', cooking: 'b' };
            let score = 0;
            let feedbackHTML = '<h3>Your Response Evaluation Results</h3>';
            
            // Calculate score
            Object.keys(correctAnswers).forEach(intent => {
                if (selections[intent] === correctAnswers[intent]) {
                    score++;
                }
            });
            
            feedbackHTML += `<div class="score-section"><h4>Score: ${score}/3 correct</h4></div>`;
            
            // Individual feedback for each query
            const queryTitles = {
                recipe: 'Recipe Search & Discovery',
                planning: 'Meal Planning', 
                cooking: 'Cooking Tips & Techniques'
            };
            
            const explanations = {
                recipe: {
                    correct: 'Response B directly uses the customer\'s available ingredients (chicken, bell peppers, rice) and provides a specific, actionable recipe with timing and serving information.',
                    incorrect: 'Response A provides generic chicken recipes that don\'t use the customer\'s available ingredients or address their specific situation.'
                },
                planning: {
                    correct: 'Response A provides a comprehensive, structured meal plan tailored to the family size and dietary preferences, plus offers a practical shopping list.',
                    incorrect: 'Response B is too generic and doesn\'t provide the specific meal plan the customer requested.'
                },
                cooking: {
                    correct: 'Response B delivers specific, actionable cooking techniques with temperature guidelines and practical tips that directly solve the customer\'s dry salmon problem.',
                    incorrect: 'Response A is vague and redirects to recipes rather than addressing the specific cooking technique problem.'
                }
            };
            
            Object.keys(correctAnswers).forEach(intent => {
                const userChoice = selections[intent];
                const correctChoice = correctAnswers[intent];
                const isCorrect = userChoice === correctChoice;
                
                feedbackHTML += `<div class="feedback-item ${isCorrect ? 'correct' : 'incorrect'}">`;
                feedbackHTML += `<span class="${isCorrect ? 'correct-badge' : 'incorrect-badge'}">${isCorrect ? 'CORRECT' : 'INCORRECT'}</span>`;
                feedbackHTML += `<strong>${queryTitles[intent]}:</strong> `;
                
                if (isCorrect) {
                    feedbackHTML += `You selected Response ${correctChoice.toUpperCase()} - ${explanations[intent].correct}`;
                } else {
                    feedbackHTML += `You selected Response ${userChoice.toUpperCase()}, but Response ${correctChoice.toUpperCase()} was better. ${explanations[intent].correct}`;
                }
                feedbackHTML += '</div>';
            });
            
            // Overall feedback
            if (score === 3) {
                feedbackHTML += '<div class="overall-feedback success"><p><strong>Excellent!</strong> You consistently chose responses that are specific, actionable, and directly address each customer\'s exact situation.</p></div>';
            } else if (score === 2) {
                feedbackHTML += '<div class="overall-feedback good"><p><strong>Good work!</strong> You\'re getting the pattern. The best responses directly address the customer\'s specific situation with actionable information.</p></div>';
            } else {
                feedbackHTML += '<div class="overall-feedback needs-work"><p><strong>Keep practicing!</strong> Focus on responses that are specific, actionable, and directly address the customer\'s exact situation rather than providing generic suggestions.</p></div>';
            }
            
            feedbackHTML += '<a href="../task-3-metrics-selection/index.html" class="next-task">Continue to Task 3: Select Evaluation Metrics</a>';
            
            document.getElementById('feedback').innerHTML = feedbackHTML;
        }
    </script>
</body>
</html>